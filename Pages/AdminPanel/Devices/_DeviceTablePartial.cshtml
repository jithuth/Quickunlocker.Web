@model Quickunlocker.Web.Pages.AdminPanel.Devices.IndexModel

<!-- Table -->
<div class="table-responsive">
    <table class="table table-bordered table-striped table-hover">
        <thead>
            <tr>
                <th style="width:50px">#</th>
                <th>Brand</th>
                <th>Model</th>
                <th>TAC</th>
                <th>Created At</th>
                <th style="width:80px">Logo</th>
                <th style="width:100px">Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Devices != null && Model.Devices.Count > 0)
            {
                int serial = Model.SerialStart;
                foreach (var d in Model.Devices)
                {
                    <tr>
                        <td>@serial</td>
                        <td>@d.Brand</td>
                        <td>@d.Model</td>
                        <td>@d.Tac</td>
                        <td>@d.CreatedAt.ToString("MMM dd, yyyy")</td>
                        <td class="text-center">
                            @if (!string.IsNullOrEmpty(d.BrandLogoUrl))
                            {
                                <img src="@d.BrandLogoUrl" alt="@d.Brand" class="img-thumbnail" style="height:40px; max-width:60px;" />
                            }
                            else
                            {
                                <span class="text-muted">N/A</span>
                            }
                        </td>
                        <td>
                            <div class="btn-group">
                                <a href="/AdminPanel/Devices/Edit/@d.Id" class="btn btn-info btn-sm" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <button type="button" class="btn btn-danger btn-sm" title="Delete" onclick="confirmDelete('@d.Id')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    serial++;
                }
            }
            else
            {
                <tr>
                    <td colspan="7" class="text-center text-muted py-4">
                        <i class="fas fa-inbox fa-3x mb-3 d-block"></i>
                        <p class="mb-0">
                            @if (!string.IsNullOrWhiteSpace(Model.Search))
                            {
                                <span>No devices found matching "@Model.Search"</span>
                            }
                            else
                            {
                                <span>No devices found.</span>
                            }
                        </p>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- Pagination -->
@if (Model.TotalPages > 1)
{
    <div class="d-flex justify-content-between align-items-center mt-3">
        <div>
            <p class="text-muted mb-0">
                @if (Model.Devices.Count > 0)
                {
                    <span>Showing @Model.SerialStart to @(Model.SerialStart + Model.Devices.Count - 1) of @Model.TotalItems devices</span>
                }
                else
                {
                    <span>No devices to display</span>
                }
            </p>
        </div>
        <nav aria-label="Device pagination">
            <ul class="pagination mb-0" id="pagination">
                @{
                    bool isFirstPage = Model.CurrentPage == 1;
                    bool isLastPage = Model.CurrentPage >= Model.TotalPages;
                }
                
                <li class="page-item @(isFirstPage ? "disabled" : "")">
                    <a class="page-link" href="javascript:void(0)" data-page="@(Model.CurrentPage - 1)" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                
                @{
                    int startPage = Math.Max(1, Model.CurrentPage - 2);
                    int endPage = Math.Min(Model.TotalPages, Model.CurrentPage + 2);
                    
                    if (startPage > 1)
                    {
                        <li class="page-item">
                            <a class="page-link" href="javascript:void(0)" data-page="1">1</a>
                        </li>
                        if (startPage > 2)
                        {
                            <li class="page-item disabled">
                                <span class="page-link">...</span>
                            </li>
                        }
                    }
                    
                    for (var i = startPage; i <= endPage; i++)
                    {
                        <li class="page-item @(Model.CurrentPage == i ? "active" : "")">
                            <a class="page-link" href="javascript:void(0)" data-page="@i">@i</a>
                        </li>
                    }
                    
                    if (endPage < Model.TotalPages)
                    {
                        if (endPage < Model.TotalPages - 1)
                        {
                            <li class="page-item disabled">
                                <span class="page-link">...</span>
                            </li>
                        }
                        <li class="page-item">
                            <a class="page-link" href="javascript:void(0)" data-page="@Model.TotalPages">@Model.TotalPages</a>
                        </li>
                    }
                }
                
                <li class="page-item @(isLastPage ? "disabled" : "")">
                    <a class="page-link" href="javascript:void(0)" data-page="@(Model.CurrentPage + 1)" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
}
else if (Model.Devices.Count > 0)
{
    <div class="mt-3">
        <p class="text-muted mb-0">
            Showing @Model.Devices.Count of @Model.TotalItems devices
        </p>
    </div>
}
